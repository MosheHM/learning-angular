<div class="section-content">
  <h2>Form Fields (Right Section)</h2>

  <!-- Demo Fields Outlet Component (Programmatic Rendering) -->
  <div class="demo-section">
    <h3>Programmatic Field Rendering Demo</h3>
    <p>This demonstrates programmatic rendering of field components using ViewContainerRef</p>
    
    <!-- Field Type Selector -->
    <div class="field-type-selector">
      <button 
        (click)="switchFieldType('text')" 
        [class.active]="currentFieldType === 'text'"
        class="field-btn">
        Text Field
      </button>
      <button 
        (click)="switchFieldType('number')" 
        [class.active]="currentFieldType === 'number'"
        class="field-btn">
        Number Field
      </button>
      <button 
        (click)="switchFieldType('email')" 
        [class.active]="currentFieldType === 'email'"
        class="field-btn">
        Email Field
      </button>
      <button 
        (click)="switchFieldType('tel')" 
        [class.active]="currentFieldType === 'tel'"
        class="field-btn">
        Tel Field
      </button>
    </div>

    <!-- Current Field Type Display -->
    <div class="current-field-info">
      <p><strong>Current Field Type:</strong> {{ currentFieldType }}</p>
      <p><strong>Component:</strong> {{ currentDemoField.label }}</p>
    </div>

    <!-- Fields Outlet with Programmatic Rendering -->
    <app-fields-outlet
      [title]="'Dynamic Field Demo (Programmatic Rendering)'"
      [field]="currentDemoField"
      (formSubmit)="onDemoFieldSubmit($event)"
      (fieldChange)="onDemoFieldChange($event)">
    </app-fields-outlet>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <p>Loading form fields...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <p>Error: {{ error }}</p>
    <button (click)="refreshData()">Retry</button>
  </div>

  <!-- Data Display -->
  <div *ngIf="!loading && !error" class="form-fields-list">
    <button (click)="refreshData()" class="refresh-btn">Refresh Data</button>

    <div class="field-card" *ngFor="let field of formFields$ | async">
      <h3>{{ field.label }}</h3>
      <div class="field-details">
        <p><strong>Name:</strong> {{ field.name }}</p>
        <p><strong>Type:</strong> {{ field.input.dataType }}</p>
        <p><strong>Section:</strong> {{ field.layout.sectionId }}</p>
        <p><strong>Order:</strong> {{ field.layout.order }}</p>
        <p><strong>Required:</strong> {{ field.input.validation.required ? 'Yes' : 'No' }}</p>
        <p><strong>Max Size:</strong> {{ field.input.validation.maxSize }}</p>
        <p><strong>Tooltip:</strong> {{ field.toolTipText }}</p>
      </div>
    </div>
  </div>
</div>

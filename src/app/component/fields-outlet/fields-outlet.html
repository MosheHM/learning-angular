<div class="fields-outlet">
  @if (title) {
    <h2 class="fields-outlet__title">{{ title }}</h2>
  }

  @if (field) {
    <form class="fields-outlet__form" (ngSubmit)="onSubmit($event)">
      <div class="field-container">
        <label [for]="getFieldId()" class="field-label">
          {{ field.label }}
          @if (isRequiredForTemplate()) {
            <span class="required-indicator">*</span>
          }
        </label>

        @switch (getFieldTypeForTemplate()) {
          @case ('text') {
            <input
              type="text"
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [placeholder]="getPlaceholderText()"
              [required]="isRequiredForTemplate()"
              (input)="onFieldChange($event)"
              class="field-input"
              [class.field-input--error]="getFieldError()"
            />
          }
          @case ('number') {
            <input
              type="number"
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [placeholder]="getPlaceholderText()"
              [required]="isRequiredForTemplate()"
              (input)="onFieldChange($event)"
              class="field-input"
              [class.field-input--error]="getFieldError()"
            />
          }
          @case ('email') {
            <input
              type="email"
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [placeholder]="getPlaceholderText()"
              [required]="isRequiredForTemplate()"
              (input)="onFieldChange($event)"
              class="field-input"
              [class.field-input--error]="getFieldError()"
            />
          }
          @case ('password') {
            <input
              type="password"
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [placeholder]="getPlaceholderText()"
              [required]="isRequiredForTemplate()"
              (input)="onFieldChange($event)"
              class="field-input"
              [class.field-input--error]="getFieldError()"
            />
          }
          @case ('textarea') {
            <textarea
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [placeholder]="getPlaceholderText()"
              [required]="isRequiredForTemplate()"
              (input)="onFieldChange($event)"
              class="field-textarea"
              [class.field-textarea--error]="getFieldError()"
              rows="4"
            ></textarea>
          }
          @case ('select') {
            <select
              [id]="getFieldId()"
              [name]="getFieldId()"
              [value]="getFieldValue()"
              [required]="isRequiredForTemplate()"
              (change)="onFieldChange($event)"
              class="field-select"
              [class.field-select--error]="getFieldError()"
            >
              <option value="">Select {{ field.label.toLowerCase() }}</option>
              @for (option of field.options; track option.value) {
                <option [value]="option.value">{{ option.label }}</option>
              }
            </select>
          }
        }

        @if (getFieldError()) {
          <div class="field-error">
            {{ getFieldError() }}
          </div>
        }
      </div>

      <div class="fields-outlet__actions">
        <button
          type="submit"
          class="btn btn--primary"
          [disabled]="!isFormValid()"
        >
          Submit
        </button>
        <button
          type="button"
          class="btn btn--secondary"
          (click)="resetForm()"
        >
          Reset
        </button>
      </div>
    </form>
  }
</div>